{"ast":null,"code":"var _jsxFileName = \"/nfs/homes/kkonarze/BHL/BHL/spacehub/src/sections/chatBot/ChatBox.jsx\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState } from \"react\";\nimport \"./chatBox.css\";\nimport { Link } from \"react-router-dom\";\n\n// Make sure your chat box also handles SpeechRecognition\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatBox = () => {\n  _s();\n  const audioPlayer = useRef(null);\n  const audioSource = useRef(null);\n  let mediaRecorder;\n  let mediaRecorderRef;\n  let audioChunks = [];\n  const [messages, setMessages] = useState([{\n    sender: \"bot\",\n    text: \"Hello! How can I assist you today?\"\n  }]);\n  const [inputValue, setInputValue] = useState(\"\");\n  const [isRecording, setIsRecording] = useState(false);\n\n  // Handle sending messages (text and audio)\n  const handleSend = async () => {\n    if (!inputValue.trim()) return;\n\n    // Add the user's message\n    const newMessages = [...messages, {\n      sender: \"user\",\n      text: inputValue\n    }];\n    setMessages(newMessages);\n\n    // Clear input field\n    setInputValue(\"\");\n\n    // Send the user's message to GPT and get a response\n    const gptResponse = await getGptResponse(inputValue);\n    setMessages([...newMessages, {\n      sender: \"bot\",\n      text: gptResponse\n    }]);\n  };\n\n  // Function to handle speech recognition\n\n  const startRecording = async () => {\n    if (isRecording) {\n      if (isRecording) {\n        // Stop recording if mediaRecorder exists\n        if (mediaRecorderRef.current) {\n          mediaRecorderRef.current.stop();\n        } else {\n          console.error(\"mediaRecorder is undefined.\");\n        }\n      } else {\n        try {\n          // Request microphone access\n          const stream = await navigator.mediaDevices.getUserMedia({\n            audio: true\n          });\n          const mediaRecorder = new MediaRecorder(stream);\n          mediaRecorderRef.current = mediaRecorder;\n          audioChunks = [];\n          mediaRecorder.ondataavailable = event => {\n            audioChunks.push(event.data);\n          };\n          mediaRecorder.onstop = async () => {\n            const audioBlob = new Blob(audioChunks, {\n              type: \"audio/mp3\"\n            });\n            const formData = new FormData();\n            formData.append(\"audio\", audioBlob, \"AsSpeech.mp3\");\n            try {\n              const response = await fetch(`http://localhost:5000/voice`, {\n                method: \"POST\",\n                body: formData\n              });\n              if (!response.ok) {\n                throw new Error(\"Failed to upload audio\");\n              }\n              const data = await response.json();\n              const uniqueAudioUrl = `http://localhost:5000${data.audioUrl}?timestamp=${new Date().getTime()}`;\n              const audio = new Audio(uniqueAudioUrl);\n              audio.load();\n              audio.play();\n            } catch (error) {\n              console.error(\"Error uploading audio:\", error);\n              alert(\"Failed to upload audio. Please try again.\");\n            }\n          };\n          mediaRecorder.start();\n        } catch (error) {\n          console.error(\"Error accessing microphone:\", error);\n          alert(\"Could not access microphone. Please check your permissions.\");\n        }\n      }\n      setIsRecording(!isRecording);\n    }\n  };\n  const getGptResponse = async userMessage => {\n    try {\n      console.log(userMessage);\n      const response = await fetch(\"http://localhost:5000/chat\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          message: userMessage\n        })\n      });\n      const data = await response.json();\n      console.log(`${data.audioUrl}?timestamp=${new Date().getTime()}`);\n      const uniqueAudioUrl = `http://localhost:5000${data.audioUrl}?timestamp=${new Date().getTime()}`;\n      const audio = new Audio(uniqueAudioUrl);\n      audio.load();\n      audio.play().then(() => {\n        console.log('Audio started playing!');\n      }).catch(error => {\n        console.error('Error playing audio:', error);\n      });\n      return data.response || \"No response from AstroMind.\";\n    } catch (error) {\n      console.error(\"Error fetching AstroMind response:\", error);\n      return \"Error fetching AstroMind response.\";\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-container\",\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: \"/\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        id: \"cta-btn\",\n        className: \"back-button\",\n        children: [\"Back\", /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-messages\",\n      children: messages.map((msg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `message ${msg.sender === \"user\" ? \"user\" : \"bot\"}`,\n        children: msg.text\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"audio\", {\n        ref: audioPlayer,\n        hidden: true,\n        children: /*#__PURE__*/_jsxDEV(\"source\", {\n          ref: audioSource,\n          type: \"audio/mpeg\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-input\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Type your message...\",\n        value: inputValue,\n        onChange: e => setInputValue(e.target.value),\n        onKeyDown: e => e.key === \"Enter\" && handleSend()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"send-button\",\n        onClick: handleSend,\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"mic-button\",\n        onClick: startRecording,\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          width: \"24\",\n          height: \"24\",\n          viewBox: \"0 0 24 24\",\n          fill: \"none\",\n          xmlns: \"http://www.w3.org/2000/svg\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M12 14C11.1667 14 10.4583 13.7083 9.875 13.125C9.29167 12.5417 9 11.8333 9 11V5C9 4.16667 9.29167 3.45833 9.875 2.875C10.4583 2.29167 11.1667 2 12 2C12.8333 2 13.5417 2.29167 14.125 2.875C14.7083 3.45833 15 4.16667 15 5V11C15 11.8333 14.7083 12.5417 14.125 13.125C13.5417 13.7083 12.8333 14 12 14ZM11 21V17.925C9.26667 17.6917 7.83333 16.9167 6.7 15.6C5.56667 14.2833 5 12.75 5 11H7C7 12.3833 7.48767 13.5627 8.463 14.538C9.43833 15.5133 10.6173 16.0007 12 16C13.3827 15.9993 14.562 15.5117 15.538 14.537C16.514 13.5623 17.0013 12.3833 17 11H19C19 12.75 18.4333 14.2833 17.3 15.6C16.1667 16.9167 14.7333 17.6917 13 17.925V21H11Z\",\n            fill: \"white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 127,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatBox, \"HNRPEVW0UddGVdru9LCykK+gRqg=\");\n_c = ChatBox;\nexport default ChatBox;\nvar _c;\n$RefreshReg$(_c, \"ChatBox\");","map":{"version":3,"names":["React","useRef","useState","Link","jsxDEV","_jsxDEV","ChatBox","_s","audioPlayer","audioSource","mediaRecorder","mediaRecorderRef","audioChunks","messages","setMessages","sender","text","inputValue","setInputValue","isRecording","setIsRecording","handleSend","trim","newMessages","gptResponse","getGptResponse","startRecording","current","stop","console","error","stream","navigator","mediaDevices","getUserMedia","audio","MediaRecorder","ondataavailable","event","push","data","onstop","audioBlob","Blob","type","formData","FormData","append","response","fetch","method","body","ok","Error","json","uniqueAudioUrl","audioUrl","Date","getTime","Audio","load","play","alert","start","userMessage","log","headers","JSON","stringify","message","then","catch","className","children","to","id","fileName","_jsxFileName","lineNumber","columnNumber","map","msg","index","ref","hidden","placeholder","value","onChange","e","target","onKeyDown","key","onClick","width","height","viewBox","fill","xmlns","d","_c","$RefreshReg$"],"sources":["/nfs/homes/kkonarze/BHL/BHL/spacehub/src/sections/chatBot/ChatBox.jsx"],"sourcesContent":["import React, { useRef, useState } from \"react\";\nimport \"./chatBox.css\";\nimport { Link } from \"react-router-dom\";\n\n// Make sure your chat box also handles SpeechRecognition\nconst ChatBox = () => {\n\tconst audioPlayer = useRef(null);\n\tconst audioSource = useRef(null);\n\tlet mediaRecorder;\n\tlet mediaRecorderRef;\n\tlet audioChunks = [];\n  const [messages, setMessages] = useState([\n    { sender: \"bot\", text: \"Hello! How can I assist you today?\" },\n  ]);\n  const [inputValue, setInputValue] = useState(\"\");\n  const [isRecording, setIsRecording] = useState(false);\n\n  // Handle sending messages (text and audio)\n  const handleSend = async () => {\n    if (!inputValue.trim()) return;\n\n    // Add the user's message\n    const newMessages = [...messages, { sender: \"user\", text: inputValue }];\n    setMessages(newMessages);\n\n    // Clear input field\n    setInputValue(\"\");\n\n    // Send the user's message to GPT and get a response\n    const gptResponse = await getGptResponse(inputValue);\n    setMessages([...newMessages, { sender: \"bot\", text: gptResponse }]);\n  };\n\n  // Function to handle speech recognition\n\n\tconst startRecording = async () => {\n\t\tif (isRecording) {\n\t\t\tif (isRecording) {\n\t\t\t\t// Stop recording if mediaRecorder exists\n\t\t\t\tif (mediaRecorderRef.current) {\n\t\t\t\t\tmediaRecorderRef.current.stop();\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error(\"mediaRecorder is undefined.\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttry {\n\t\t\t\t\t// Request microphone access\n\t\t\t\t\tconst stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n\t\t\t\t\tconst mediaRecorder = new MediaRecorder(stream);\n\t\t\n\t\t\t\t\tmediaRecorderRef.current = mediaRecorder;\n\t\t\t\t\taudioChunks = [];\n\t\t\n\t\t\t\t\tmediaRecorder.ondataavailable = (event) => {\n\t\t\t\t\t\taudioChunks.push(event.data);\n\t\t\t\t\t};\n\t\t\n\t\t\t\t\tmediaRecorder.onstop = async () => {\n\t\t\t\t\t\tconst audioBlob = new Blob(audioChunks, { type: \"audio/mp3\" });\n\t\t\t\t\t\tconst formData = new FormData();\n\t\t\t\t\t\tformData.append(\"audio\", audioBlob, \"AsSpeech.mp3\");\n\t\t\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst response = await fetch(`http://localhost:5000/voice`, {\n\t\t\t\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\t\t\t\tbody: formData,\n\t\t\t\t\t\t\t});\n\t\t\n\t\t\t\t\t\t\tif (!response.ok) {\n\t\t\t\t\t\t\t\tthrow new Error(\"Failed to upload audio\");\n\t\t\t\t\t\t\t}\n\t\t\n\t\t\t\t\t\t\tconst data = await response.json();\n\t\t\t\t\t\t\tconst uniqueAudioUrl = `http://localhost:5000${data.audioUrl}?timestamp=${new Date().getTime()}`;\n\t\t\n\t\t\t\t\t\t\tconst audio = new Audio(uniqueAudioUrl);\n\t\t\t\t\t\t\taudio.load();\n\t\t\t\t\t\t\taudio.play();\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tconsole.error(\"Error uploading audio:\", error);\n\t\t\t\t\t\t\talert(\"Failed to upload audio. Please try again.\");\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\n\t\t\t\t\tmediaRecorder.start();\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error(\"Error accessing microphone:\", error);\n\t\t\t\t\talert(\"Could not access microphone. Please check your permissions.\");\n\t\t\t\t}\n\t\t\t}\n\t\t\n\t\t\tsetIsRecording(!isRecording);\n\t\t}\n  };\n\n  const getGptResponse = async (userMessage) => {\n    try {\n\t\tconsole.log(userMessage);\n\t\tconst response = await fetch(\"http://localhost:5000/chat\", {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\tbody: JSON.stringify({ message: userMessage }),\n\t\t});\n\n      const data = await response.json();\n\t  console.log(`${data.audioUrl}?timestamp=${new Date().getTime()}`)\n\t  const uniqueAudioUrl = `http://localhost:5000${data.audioUrl}?timestamp=${new Date().getTime()}`;\n\n\t\tconst audio = new Audio(uniqueAudioUrl);\n\t\taudio.load();\n\t\taudio.play()\n      \t\t.then(() => {\n        \t\tconsole.log('Audio started playing!');\n      \t\t})\n      \t\t.catch((error) => {\n       \t\t\tconsole.error('Error playing audio:', error);\n      });\n      return data.response || \"No response from AstroMind.\";\n    } catch (error) {\n      console.error(\"Error fetching AstroMind response:\", error);\n      return \"Error fetching AstroMind response.\";\n    }\n  };\n\n\n  return (\n    <div className=\"chat-container\">\n      <Link to=\"/\">\n        <button type=\"button\" id=\"cta-btn\" className=\"back-button\">\n          Back<span></span>\n        </button>\n      </Link>\n      {/* Chat messages area */}\n      <div className=\"chat-messages\">\n        {messages.map((msg, index) => (\n          <div key={index} className={`message ${msg.sender === \"user\" ? \"user\" : \"bot\"}`}>\n            {msg.text}\n          </div>\n        ))}\n      </div>\n\n      {/* Audio Player (hidden, for playing audio responses) */}\n      <div>\n        <audio ref={audioPlayer} hidden>\n          <source ref={audioSource} type=\"audio/mpeg\"></source>\n        </audio>\n      </div>\n\n      {/* Chat input area */}\n      <div className=\"chat-input\">\n        <input\n          type=\"text\"\n          placeholder=\"Type your message...\"\n          value={inputValue}\n          onChange={(e) => setInputValue(e.target.value)}\n          onKeyDown={(e) => e.key === \"Enter\" && handleSend()}\n        />\n        <button type=\"button\" className=\"send-button\" onClick={handleSend}>\n          Send\n        </button>\n        <button\n          type=\"button\"\n          className=\"mic-button\"\n          onClick={startRecording}\n        >\n          <svg\n            width=\"24\"\n            height=\"24\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              d=\"M12 14C11.1667 14 10.4583 13.7083 9.875 13.125C9.29167 12.5417 9 11.8333 9 11V5C9 4.16667 9.29167 3.45833 9.875 2.875C10.4583 2.29167 11.1667 2 12 2C12.8333 2 13.5417 2.29167 14.125 2.875C14.7083 3.45833 15 4.16667 15 5V11C15 11.8333 14.7083 12.5417 14.125 13.125C13.5417 13.7083 12.8333 14 12 14ZM11 21V17.925C9.26667 17.6917 7.83333 16.9167 6.7 15.6C5.56667 14.2833 5 12.75 5 11H7C7 12.3833 7.48767 13.5627 8.463 14.538C9.43833 15.5133 10.6173 16.0007 12 16C13.3827 15.9993 14.562 15.5117 15.538 14.537C16.514 13.5623 17.0013 12.3833 17 11H19C19 12.75 18.4333 14.2833 17.3 15.6C16.1667 16.9167 14.7333 17.6917 13 17.925V21H11Z\"\n              fill=\"white\"\n            />\n          </svg>\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatBox;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}