{"ast":null,"code":"var _jsxFileName = \"/nfs/homes/dszafran/Desktop/BHL/BHL2/BHL/spacehub/src/sections/chatBot/ChatBox.jsx\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState } from \"react\";\nimport \"./chatBox.css\";\nimport { Link } from \"react-router-dom\";\n\n// Make sure your chat box also handles SpeechRecognition\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatBox = () => {\n  _s();\n  const audioPlayer = useRef(null);\n  const audioSource = useRef(null);\n  const [messages, setMessages] = useState([{\n    sender: \"bot\",\n    text: \"Hello! How can I assist you today?\"\n  }]);\n  const [inputValue, setInputValue] = useState(\"\");\n  const [isRecording, setIsRecording] = useState(false);\n\n  // Handle sending messages (text and audio)\n  const handleSend = async () => {\n    if (!inputValue.trim()) return;\n\n    // Add the user's message\n    const newMessages = [...messages, {\n      sender: \"user\",\n      text: inputValue\n    }];\n    setMessages(newMessages);\n\n    // Clear input field\n    setInputValue(\"\");\n\n    // Send the user's message to GPT and get a response\n    const gptResponse = await getGptResponse(inputValue);\n    setMessages([...newMessages, {\n      sender: \"bot\",\n      text: gptResponse\n    }]);\n  };\n\n  // Function to handle speech recognition\n  const startRecording = () => {\n    if (isRecording) return;\n\n    // Initialize SpeechRecognition API for capturing audio\n    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();\n    recognition.lang = \"en-US\"; // Adjust to desired language\n    recognition.start();\n    recognition.onstart = () => {\n      setIsRecording(true);\n    };\n    recognition.onresult = event => {\n      const speechText = event.results[0][0].transcript;\n      setInputValue(speechText);\n      handleSend();\n      setIsRecording(false);\n    };\n    recognition.onerror = error => {\n      console.error(\"Speech recognition error:\", error);\n      setIsRecording(false);\n    };\n  };\n  const getGptResponse = async message => {\n    try {\n      const response = await fetch(\"http://localhost:5000/chat\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          message: message\n        })\n      });\n      const data = await response.json();\n      return data.response || \"No response from AstroMind.\";\n    } catch (error) {\n      console.error(\"Error fetching AstroMind response:\", error);\n      return \"Error fetching AstroMind response.\";\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-container\",\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: \"/\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        id: \"cta-btn\",\n        className: \"back-button\",\n        children: [\"Back\", /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-messages\",\n      children: messages.map((msg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `message ${msg.sender === \"user\" ? \"user\" : \"bot\"}`,\n        children: msg.text\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"audio\", {\n        ref: audioPlayer,\n        hidden: true,\n        children: /*#__PURE__*/_jsxDEV(\"source\", {\n          ref: audioSource,\n          type: \"audio/mpeg\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-input\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Type your message...\",\n        value: inputValue,\n        onChange: e => setInputValue(e.target.value),\n        onKeyDown: e => e.key === \"Enter\" && handleSend()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"send-button\",\n        onClick: handleSend,\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"mic-button\",\n        onClick: startRecording,\n        disabled: isRecording,\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          width: \"24\",\n          height: \"24\",\n          viewBox: \"0 0 24 24\",\n          fill: \"none\",\n          xmlns: \"http://www.w3.org/2000/svg\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M12 14C11.1667 14 10.4583 13.7083 9.875 13.125C9.29167 12.5417 9 11.8333 9 11V5C9 4.16667 9.29167 3.45833 9.875 2.875C10.4583 2.29167 11.1667 2 12 2C12.8333 2 13.5417 2.29167 14.125 2.875C14.7083 3.45833 15 4.16667 15 5V11C15 11.8333 14.7083 12.5417 14.125 13.125C13.5417 13.7083 12.8333 14 12 14ZM11 21V17.925C9.26667 17.6917 7.83333 16.9167 6.7 15.6C5.56667 14.2833 5 12.75 5 11H7C7 12.3833 7.48767 13.5627 8.463 14.538C9.43833 15.5133 10.6173 16.0007 12 16C13.3827 15.9993 14.562 15.5117 15.538 14.537C16.514 13.5623 17.0013 12.3833 17 11H19C19 12.75 18.4333 14.2833 17.3 15.6C16.1667 16.9167 14.7333 17.6917 13 17.925V21H11Z\",\n            fill: \"white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatBox, \"HNRPEVW0UddGVdru9LCykK+gRqg=\");\n_c = ChatBox;\nexport default ChatBox;\nvar _c;\n$RefreshReg$(_c, \"ChatBox\");","map":{"version":3,"names":["React","useRef","useState","Link","jsxDEV","_jsxDEV","ChatBox","_s","audioPlayer","audioSource","messages","setMessages","sender","text","inputValue","setInputValue","isRecording","setIsRecording","handleSend","trim","newMessages","gptResponse","getGptResponse","startRecording","recognition","window","SpeechRecognition","webkitSpeechRecognition","lang","start","onstart","onresult","event","speechText","results","transcript","onerror","error","console","message","response","fetch","method","headers","body","JSON","stringify","data","json","className","children","to","type","id","fileName","_jsxFileName","lineNumber","columnNumber","map","msg","index","ref","hidden","placeholder","value","onChange","e","target","onKeyDown","key","onClick","disabled","width","height","viewBox","fill","xmlns","d","_c","$RefreshReg$"],"sources":["/nfs/homes/dszafran/Desktop/BHL/BHL2/BHL/spacehub/src/sections/chatBot/ChatBox.jsx"],"sourcesContent":["import React, { useRef, useState } from \"react\";\nimport \"./chatBox.css\";\nimport { Link } from \"react-router-dom\";\n\n// Make sure your chat box also handles SpeechRecognition\nconst ChatBox = () => {\n\tconst audioPlayer = useRef(null);\n\tconst audioSource = useRef(null);\n\n  const [messages, setMessages] = useState([\n    { sender: \"bot\", text: \"Hello! How can I assist you today?\" },\n  ]);\n  const [inputValue, setInputValue] = useState(\"\");\n  const [isRecording, setIsRecording] = useState(false);\n\n  // Handle sending messages (text and audio)\n  const handleSend = async () => {\n    if (!inputValue.trim()) return;\n\n    // Add the user's message\n    const newMessages = [...messages, { sender: \"user\", text: inputValue }];\n    setMessages(newMessages);\n\n    // Clear input field\n    setInputValue(\"\");\n\n    // Send the user's message to GPT and get a response\n    const gptResponse = await getGptResponse(inputValue);\n    setMessages([...newMessages, { sender: \"bot\", text: gptResponse }]);\n  };\n\n  // Function to handle speech recognition\n  const startRecording = () => {\n    if (isRecording) return;\n\n    // Initialize SpeechRecognition API for capturing audio\n    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();\n    recognition.lang = \"en-US\"; // Adjust to desired language\n    recognition.start();\n\n    recognition.onstart = () => {\n      setIsRecording(true);\n    };\n\n    recognition.onresult = (event) => {\n      const speechText = event.results[0][0].transcript;\n      setInputValue(speechText);\n      handleSend();\n      setIsRecording(false);\n    };\n\n    recognition.onerror = (error) => {\n      console.error(\"Speech recognition error:\", error);\n      setIsRecording(false);\n    };\n  };\n\n  const getGptResponse = async (message) => {\n    try {\n\t\tconst response = await fetch(\"http://localhost:5000/chat\", {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\tbody: JSON.stringify({ message: message }),\n\t\t});\n\n      const data = await response.json();\n      return data.response || \"No response from AstroMind.\";\n    } catch (error) {\n      console.error(\"Error fetching AstroMind response:\", error);\n      return \"Error fetching AstroMind response.\";\n    }\n  };\n\n  return (\n    <div className=\"chat-container\">\n      <Link to=\"/\">\n        <button type=\"button\" id=\"cta-btn\" className=\"back-button\">\n          Back<span></span>\n        </button>\n      </Link>\n      {/* Chat messages area */}\n      <div className=\"chat-messages\">\n        {messages.map((msg, index) => (\n          <div\n            key={index}\n            className={`message ${msg.sender === \"user\" ? \"user\" : \"bot\"}`}\n          >\n            {msg.text}\n          </div>\n        ))}\n      \t</div>\n\t  \t<div>\n\t\t  <audio ref={audioPlayer} hidden>\n    \t\t<source ref={audioSource} type=\"audio/mpeg\"></source>\n\t\t</audio>\n\t\t</div>\n      <div className=\"chat-input\">\n        <input\n          type=\"text\"\n          placeholder=\"Type your message...\"\n          value={inputValue}\n          onChange={(e) => setInputValue(e.target.value)}\n          onKeyDown={(e) => e.key === \"Enter\" && handleSend()}\n        />\n        <button type=\"button\" className=\"send-button\" onClick={handleSend}>\n          Send\n        </button>\n        <button\n          type=\"button\"\n          className=\"mic-button\"\n          onClick={startRecording}\n          disabled={isRecording}\n        >\n          <svg\n            width=\"24\"\n            height=\"24\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              d=\"M12 14C11.1667 14 10.4583 13.7083 9.875 13.125C9.29167 12.5417 9 11.8333 9 11V5C9 4.16667 9.29167 3.45833 9.875 2.875C10.4583 2.29167 11.1667 2 12 2C12.8333 2 13.5417 2.29167 14.125 2.875C14.7083 3.45833 15 4.16667 15 5V11C15 11.8333 14.7083 12.5417 14.125 13.125C13.5417 13.7083 12.8333 14 12 14ZM11 21V17.925C9.26667 17.6917 7.83333 16.9167 6.7 15.6C5.56667 14.2833 5 12.75 5 11H7C7 12.3833 7.48767 13.5627 8.463 14.538C9.43833 15.5133 10.6173 16.0007 12 16C13.3827 15.9993 14.562 15.5117 15.538 14.537C16.514 13.5623 17.0013 12.3833 17 11H19C19 12.75 18.4333 14.2833 17.3 15.6C16.1667 16.9167 14.7333 17.6917 13 17.925V21H11Z\"\n              fill=\"white\"\n            />\n          </svg>\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatBox;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}